<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   width="296.86249mm"
   height="336.9953mm"
   viewBox="0 0 296.86249 336.9953"
   version="1.1"
   id="svg1"
   inkscape:version="1.4.3 (0d15f75, 2025-12-25)"
   sodipodi:docname="write-operation-inkscape.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm"
     inkscape:zoom="1"
     inkscape:cx="416.5"
     inkscape:cy="535"
     inkscape:window-width="1920"
     inkscape:window-height="1027"
     inkscape:window-x="1512"
     inkscape:window-y="25"
     inkscape:window-maximized="1"
     inkscape:current-layer="layer1"
     showgrid="false" />
  <defs
     id="defs1">
    <marker
       id="arrowhead-gray"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon21" />
    </marker>
    <marker
       id="arrowhead"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon20" />
    </marker>
    <marker
       id="marker1"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon1" />
    </marker>
    <marker
       id="marker2"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon2" />
    </marker>
    <marker
       id="marker3"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon3" />
    </marker>
    <marker
       id="arrowhead-gold"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#b8860b"
         id="polygon22" />
    </marker>
    <marker
       id="marker4"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon4" />
    </marker>
    <marker
       id="marker5"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon5" />
    </marker>
    <marker
       id="marker6"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon6" />
    </marker>
    <marker
       id="marker7"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon7" />
    </marker>
    <marker
       id="marker8"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon8" />
    </marker>
    <marker
       id="marker9"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon9" />
    </marker>
    <marker
       id="marker10"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#b8860b"
         id="polygon10" />
    </marker>
    <marker
       id="marker11"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon11" />
    </marker>
    <marker
       id="marker12"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#b8860b"
         id="polygon12" />
    </marker>
    <marker
       id="marker13"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#666666"
         id="polygon13" />
    </marker>
    <marker
       id="marker14"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#b8860b"
         id="polygon14" />
    </marker>
    <marker
       id="marker15"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon15" />
    </marker>
    <marker
       id="marker16"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon16" />
    </marker>
    <marker
       id="marker17"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon17" />
    </marker>
    <marker
       id="marker18"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon18" />
    </marker>
    <marker
       id="marker19"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon19" />
    </marker>
    <marker
       id="marker23"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon23" />
    </marker>
    <marker
       id="marker24"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon24" />
    </marker>
    <marker
       id="marker25"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon25" />
    </marker>
    <marker
       id="marker26"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon26" />
    </marker>
    <marker
       id="marker27"
       markerWidth="10"
       markerHeight="10"
       refX="9"
       refY="3"
       orient="auto">
      <polygon
         points="0,0 10,3 0,6 "
         fill="#000000"
         id="polygon27" />
    </marker>
  </defs>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(37.041668,-2.6458283)">
    <text
       x="95.514587"
       y="9.0785131"
       font-size="8.46667px"
       font-weight="bold"
       fill="#d2691e"
       text-anchor="middle"
       id="text1"
       style="stroke-width:0.264583">FORM: Write Operation</text>
    <rect
       x="2.9104178"
       y="18.338905"
       width="195.79167"
       height="222.25"
       fill="none"
       stroke="#ff0000"
       stroke-width="0.79375"
       stroke-dasharray="10, 5"
       id="rect1" />
    <text
       x="100.80624"
       y="17.015999"
       font-size="3.70417px"
       font-weight="bold"
       fill="#ff0000"
       text-anchor="middle"
       id="text2"
       style="stroke-width:0.264583">FORM Boundary</text>
    <rect
       x="-36.777084"
       y="23.630569"
       width="31.75"
       height="15.875"
       fill="#ffe4b5"
       stroke="#ff8c00"
       stroke-width="0.529167"
       id="rect2" />
    <text
       x="-20.902082"
       y="32.890991"
       font-size="4.23333px"
       font-weight="bold"
       text-anchor="middle"
       id="text3"
       style="stroke-width:0.264583">PHLEX</text>
    <rect
       x="8.2020817"
       y="23.630569"
       width="37.041668"
       height="15.875"
       fill="#add8e6"
       stroke="#4682b4"
       stroke-width="0.529167"
       id="rect3" />
    <text
       x="26.722918"
       y="31.568069"
       font-size="3.70417px"
       font-weight="bold"
       text-anchor="middle"
       id="text4"
       style="stroke-width:0.264583">form_interface</text>
    <text
       x="26.722918"
       y="36.330574"
       font-size="3.175px"
       text-anchor="middle"
       id="text5"
       style="stroke-width:0.264583">(form.cpp)</text>
    <rect
       x="58.472919"
       y="23.630569"
       width="37.041668"
       height="15.875"
       fill="#dda0dd"
       stroke="#9370db"
       stroke-width="0.529167"
       id="rect5" />
    <text
       x="76.993744"
       y="31.568069"
       font-size="3.70417px"
       font-weight="bold"
       text-anchor="middle"
       id="text6"
       style="stroke-width:0.264583">Persistence</text>
    <text
       x="76.993744"
       y="36.330574"
       font-size="3.175px"
       text-anchor="middle"
       id="text7"
       style="stroke-width:0.264583">(persistence.cpp)</text>
    <rect
       x="108.74374"
       y="23.630569"
       width="37.041668"
       height="15.875"
       fill="#98fb98"
       stroke="#228b22"
       stroke-width="0.529167"
       id="rect7" />
    <text
       x="127.26457"
       y="31.568069"
       font-size="3.70417px"
       font-weight="bold"
       text-anchor="middle"
       id="text8"
       style="stroke-width:0.264583">Storage</text>
    <text
       x="127.26457"
       y="36.330574"
       font-size="3.175px"
       text-anchor="middle"
       id="text9"
       style="stroke-width:0.264583">(storage.cpp)</text>
    <rect
       x="159.01457"
       y="23.630569"
       width="39.6875"
       height="15.875"
       fill="#ffd700"
       stroke="#b8860b"
       stroke-width="0.529167"
       id="rect9" />
    <text
       x="178.85832"
       y="28.922241"
       font-size="3.43958px"
       font-weight="bold"
       text-anchor="middle"
       id="text10"
       style="font-size:3.175px;stroke-width:0.264583">ROOT Implementation</text>
    <text
       x="178.85832"
       y="33.420158"
       font-size="2.64583px"
       text-anchor="middle"
       id="text11"
       style="stroke-width:0.264583">ROOT_TFileImp</text>
    <text
       x="178.85832"
       y="37.388908"
       font-size="2.64583px"
       text-anchor="middle"
       id="text12"
       style="stroke-width:0.264583">ROOT_TTreeContainerImp</text>
    <rect
       x="211.93124"
       y="23.630569"
       width="47.625"
       height="15.875"
       fill="#d3d3d3"
       stroke="#808080"
       stroke-width="0.529167"
       id="rect12" />
    <text
       x="235.74374"
       y="28.922241"
       font-size="3.70417px"
       font-weight="bold"
       text-anchor="middle"
       id="text13"
       style="stroke-width:0.264583">Physical Backend</text>
    <text
       x="235.74374"
       y="33.420158"
       font-size="2.91042px"
       text-anchor="middle"
       fill="#666666"
       id="text14"
       style="stroke-width:0.264583">(External Libraries)</text>
    <text
       x="235.74374"
       y="37.653488"
       font-size="2.64583px"
       text-anchor="middle"
       fill="#666666"
       id="text15"
       style="stroke-width:0.264583">ROOT TTree/RNTuple, HDF5</text>
    <line
       x1="-20.902082"
       y1="39.505569"
       x2="-20.902082"
       y2="245.88052"
       stroke="#666666"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line15" />
    <line
       x1="26.722918"
       y1="39.505569"
       x2="26.722918"
       y2="245.88052"
       stroke="#666666"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line16" />
    <line
       x1="76.993744"
       y1="39.505569"
       x2="76.993744"
       y2="245.88052"
       stroke="#666666"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line17" />
    <line
       x1="127.26457"
       y1="39.505569"
       x2="127.26457"
       y2="245.88052"
       stroke="#666666"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line18" />
    <line
       x1="178.85832"
       y1="39.505569"
       x2="178.85832"
       y2="245.88052"
       stroke="#b8860b"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line19" />
    <line
       x1="235.74374"
       y1="39.505569"
       x2="235.74374"
       y2="245.88052"
       stroke="#999999"
       stroke-width="0.529167"
       stroke-dasharray="5, 5"
       id="line20" />
    <rect
       x="5.5562496"
       y="43.474319"
       width="187.85417"
       height="37.041668"
       fill="#f5f5f5"
       stroke="#999999"
       stroke-width="0.264583"
       id="rect22" />
    <text
       x="8.2020817"
       y="47.972237"
       font-size="3.43958px"
       font-weight="bold"
       fill="#333333"
       id="text22"
       style="stroke-width:0.264583">Initialization Phase</text>
    <line
       x1="-20.902082"
       y1="51.411819"
       x2="24.077082"
       y2="51.411819"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line22" />
    <text
       x="1.5874997"
       y="50.088905"
       font-size="2.91042px"
       fill="#000000"
       text-anchor="middle"
       id="text23"
       style="stroke-width:0.264583">form_interface(type_map, config)</text>
    <line
       x1="26.722918"
       y1="56.703491"
       x2="74.347908"
       y2="56.703491"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line23" />
    <text
       x="50.535419"
       y="55.380577"
       font-size="2.91042px"
       fill="#000000"
       text-anchor="middle"
       id="text24"
       style="stroke-width:0.264583">createPersistence()</text>
    <line
       x1="76.993744"
       y1="61.995155"
       x2="124.61874"
       y2="61.995155"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line24" />
    <text
       x="100.80624"
       y="60.672241"
       font-size="2.91042px"
       fill="#000000"
       text-anchor="middle"
       id="text25"
       style="stroke-width:0.264583">createStorage()</text>
    <line
       x1="26.722918"
       y1="69.932655"
       x2="74.347908"
       y2="69.932655"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line25" />
    <text
       x="50.535419"
       y="68.609741"
       font-size="2.64583px"
       fill="#000000"
       text-anchor="middle"
       id="text26"
       style="stroke-width:0.264583">configureOutputItems() / configureTechSettings()</text>
    <rect
       x="-23.547916"
       y="85.807693"
       width="5.2916665"
       height="152.13542"
       fill="#ffe4b5"
       stroke="#ff8c00"
       stroke-width="0.264583"
       id="rect26" />
    <line
       x1="-20.902082"
       y1="88.453491"
       x2="24.077082"
       y2="88.453491"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line26" />
    <rect
       x="24.077082"
       y="85.807693"
       width="5.2916665"
       height="152.13542"
       fill="#add8e6"
       stroke="#4682b4"
       stroke-width="0.264583"
       id="rect27" />
    <line
       x1="26.722918"
       y1="96.390999"
       x2="25.4"
       y2="96.390999"
       stroke="#4169e1"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line27" />
    <text
       x="22.754168"
       y="95.068138"
       font-size="2.64583px"
       fill="#4169e1"
       text-anchor="end"
       id="text28"
       style="stroke-width:0.264583">findItem(label)</text>
    <line
       x1="26.722918"
       y1="104.32856"
       x2="74.347908"
       y2="104.32856"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line28" />
    <text
       x="29.36875"
       y="103.00565"
       font-size="2.91042px"
       fill="#000000"
       id="text29"
       style="stroke-width:0.264583">createContainers(creator, products)</text>
    <rect
       x="74.347908"
       y="104.32856"
       width="5.2916665"
       height="74.083336"
       fill="#dda0dd"
       stroke="#9370db"
       stroke-width="0.264583"
       id="rect29" />
    <line
       x1="76.993744"
       y1="109.62026"
       x2="75.67083"
       y2="109.62026"
       stroke="#4169e1"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line29" />
    <text
       x="73.024994"
       y="108.29731"
       font-size="2.38125px"
       fill="#4169e1"
       text-anchor="end"
       id="text30"
       style="stroke-width:0.264583">getPlacement() [findConfigItem, buildFullLabel]</text>
    <line
       x1="76.993744"
       y1="117.55789"
       x2="124.61874"
       y2="117.55789"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line30" />
    <text
       x="79.63958"
       y="116.23493"
       font-size="2.91042px"
       fill="#000000"
       id="text31"
       style="stroke-width:0.264583">createContainers(map&lt;Placement,type&gt;, settings)</text>
    <rect
       x="124.61874"
       y="117.55789"
       width="5.2916665"
       height="55.5625"
       fill="#98fb98"
       stroke="#228b22"
       stroke-width="0.264583"
       id="rect31" />
    <line
       x1="127.26457"
       y1="122.84961"
       x2="125.94167"
       y2="122.84961"
       stroke="#228b22"
       stroke-width="0.264583"
       marker-end="url(#arrowhead)"
       stroke-dasharray="2, 2"
       id="line31" />
    <text
       x="123.29582"
       y="121.52666"
       font-size="2.38125px"
       fill="#228b22"
       text-anchor="end"
       id="text32"
       style="stroke-width:0.264583">m_files.find(fileName)</text>
    <line
       x1="127.26457"
       y1="129.46426"
       x2="176.21249"
       y2="129.46426"
       stroke="#b8860b"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gold)"
       id="line32" />
    <text
       x="129.91042"
       y="128.14134"
       font-size="2.64583px"
       fill="#b8860b"
       id="text33"
       style="stroke-width:0.264583">ROOT_TFileImp::create()</text>
    <rect
       x="176.21249"
       y="129.46426"
       width="5.2916665"
       height="9.260417"
       fill="#ffd700"
       stroke="#b8860b"
       stroke-width="0.264583"
       id="rect33" />
    <line
       x1="181.50417"
       y1="132.11009"
       x2="233.0979"
       y2="132.11009"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line33" />
    <text
       x="184.14999"
       y="130.78719"
       font-size="2.64583px"
       fill="#666666"
       id="text34"
       style="stroke-width:0.264583">TFile::Open(&quot;RECREATE&quot;)</text>
    <rect
       x="233.0979"
       y="132.11009"
       width="5.2916665"
       height="5.2916665"
       fill="#d3d3d3"
       stroke="#808080"
       stroke-width="0.264583"
       id="rect34" />
    <line
       x1="127.26457"
       y1="142.69344"
       x2="176.21249"
       y2="142.69344"
       stroke="#b8860b"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gold)"
       id="line34" />
    <text
       x="129.91042"
       y="141.37051"
       font-size="2.64583px"
       fill="#b8860b"
       id="text35"
       style="stroke-width:0.264583">file-&gt;setAttribute()</text>
    <rect
       x="176.21249"
       y="142.69344"
       width="5.2916665"
       height="7.9375"
       fill="#ffd700"
       stroke="#b8860b"
       stroke-width="0.264583"
       id="rect35" />
    <line
       x1="181.50417"
       y1="145.33926"
       x2="233.0979"
       y2="145.33926"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line35" />
    <text
       x="184.14999"
       y="144.01634"
       font-size="2.38125px"
       fill="#666666"
       id="text36"
       style="stroke-width:0.264583">SetCompressionAlgorithm()</text>
    <line
       x1="127.26457"
       y1="154.59969"
       x2="176.21249"
       y2="154.59969"
       stroke="#b8860b"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gold)"
       id="line36" />
    <text
       x="129.91042"
       y="153.27676"
       font-size="2.64583px"
       fill="#b8860b"
       id="text37"
       style="stroke-width:0.264583">ROOT_TTreeContainerImp::create()</text>
    <rect
       x="176.21249"
       y="154.59969"
       width="5.2916665"
       height="14.552083"
       fill="#ffd700"
       stroke="#b8860b"
       stroke-width="0.264583"
       id="rect37" />
    <line
       x1="181.50417"
       y1="158.56844"
       x2="233.0979"
       y2="158.56844"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line37" />
    <text
       x="184.14999"
       y="157.24551"
       font-size="2.64583px"
       fill="#666666"
       id="text38"
       style="stroke-width:0.264583">new TTree() / RNTuple::Create()</text>
    <rect
       x="233.0979"
       y="158.56844"
       width="5.2916665"
       height="7.9375"
       fill="#d3d3d3"
       stroke="#808080"
       stroke-width="0.264583"
       id="rect38" />
    <line
       x1="181.50417"
       y1="166.50594"
       x2="233.0979"
       y2="166.50594"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line38" />
    <text
       x="184.14999"
       y="165.18301"
       font-size="2.38125px"
       fill="#666666"
       id="text39"
       style="stroke-width:0.264583">Branch() / AddField()</text>
    <line
       x1="26.722918"
       y1="183.70384"
       x2="74.347908"
       y2="183.70384"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line39" />
    <text
       x="29.36875"
       y="182.38094"
       font-size="2.91042px"
       fill="#000000"
       id="text40"
       style="stroke-width:0.264583">registerWrite(creator, label, data, type)</text>
    <rect
       x="74.347908"
       y="183.70384"
       width="5.2916665"
       height="21.166666"
       fill="#dda0dd"
       stroke="#9370db"
       stroke-width="0.264583"
       id="rect40" />
    <line
       x1="76.993744"
       y1="188.99551"
       x2="75.67083"
       y2="188.99551"
       stroke="#4169e1"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line40" />
    <text
       x="73.024994"
       y="187.67259"
       font-size="2.38125px"
       fill="#4169e1"
       text-anchor="end"
       id="text41"
       style="stroke-width:0.264583">getPlacement(creator, label)</text>
    <line
       x1="76.993744"
       y1="195.61009"
       x2="124.61874"
       y2="195.61009"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line41" />
    <text
       x="79.63958"
       y="194.28719"
       font-size="2.91042px"
       fill="#000000"
       id="text42"
       style="stroke-width:0.264583">fillContainer(placement, data, type)</text>
    <rect
       x="124.61874"
       y="195.61009"
       width="5.2916665"
       height="25.135416"
       fill="#98fb98"
       stroke="#228b22"
       stroke-width="0.264583"
       id="rect42" />
    <line
       x1="127.26457"
       y1="200.90176"
       x2="125.94167"
       y2="200.90176"
       stroke="#228b22"
       stroke-width="0.264583"
       marker-end="url(#arrowhead)"
       stroke-dasharray="2, 2"
       id="line42" />
    <text
       x="123.29582"
       y="199.57884"
       font-size="2.38125px"
       fill="#228b22"
       text-anchor="end"
       id="text43"
       style="stroke-width:0.264583">m_containers.find({fileName, containerName})</text>
    <line
       x1="127.26457"
       y1="208.83926"
       x2="176.21249"
       y2="208.83926"
       stroke="#b8860b"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gold)"
       id="line43" />
    <text
       x="129.91042"
       y="207.51634"
       font-size="2.64583px"
       fill="#b8860b"
       id="text44"
       style="stroke-width:0.264583">container-&gt;fill(data)</text>
    <rect
       x="176.21249"
       y="208.83926"
       width="5.2916665"
       height="7.9375"
       fill="#ffd700"
       stroke="#b8860b"
       stroke-width="0.264583"
       id="rect44" />
    <line
       x1="181.50417"
       y1="212.80801"
       x2="233.0979"
       y2="212.80801"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line44" />
    <text
       x="184.14999"
       y="211.48509"
       font-size="2.64583px"
       fill="#666666"
       id="text45"
       style="stroke-width:0.264583">TTree-&gt;Fill() / RNTuple-&gt;Fill()</text>
    <rect
       x="233.0979"
       y="212.80801"
       width="5.2916665"
       height="5.2916665"
       fill="#d3d3d3"
       stroke="#808080"
       stroke-width="0.264583"
       id="rect45" />
    <line
       x1="26.722918"
       y1="224.71426"
       x2="74.347908"
       y2="224.71426"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line45" />
    <text
       x="29.36875"
       y="223.39134"
       font-size="2.91042px"
       fill="#000000"
       id="text46"
       style="stroke-width:0.264583">commitOutput(creator, id)</text>
    <rect
       x="74.347908"
       y="224.71426"
       width="5.2916665"
       height="9.260417"
       fill="#dda0dd"
       stroke="#9370db"
       stroke-width="0.264583"
       id="rect46" />
    <line
       x1="76.993744"
       y1="228.68301"
       x2="75.67083"
       y2="228.68301"
       stroke="#4169e1"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line46" />
    <text
       x="73.024994"
       y="227.36009"
       font-size="2.38125px"
       fill="#4169e1"
       text-anchor="end"
       id="text47"
       style="stroke-width:0.264583">getPlacement(creator, &quot;index&quot;)</text>
    <line
       x1="76.993744"
       y1="232.65175"
       x2="124.61874"
       y2="232.65175"
       stroke="#000000"
       stroke-width="0.529167"
       marker-end="url(#arrowhead)"
       id="line47" />
    <text
       x="79.63958"
       y="231.32884"
       font-size="2.64583px"
       fill="#000000"
       id="text48"
       style="stroke-width:0.264583">commitContainers(placement)</text>
    <rect
       x="124.61874"
       y="232.65175"
       width="5.2916665"
       height="5.2916665"
       fill="#98fb98"
       stroke="#228b22"
       stroke-width="0.264583"
       id="rect48" />
    <line
       x1="129.91042"
       y1="235.29749"
       x2="233.0979"
       y2="235.29749"
       stroke="#666666"
       stroke-width="0.529167"
       marker-end="url(#arrowhead-gray)"
       id="line48" />
    <text
       x="132.55624"
       y="233.97461"
       font-size="2.64583px"
       fill="#666666"
       id="text49"
       style="stroke-width:0.264583">TTree-&gt;Write() / CommitCluster()</text>
    <rect
       x="0.263888"
       y="250.26389"
       width="99.472221"
       height="53.182648"
       fill="#fffacd"
       stroke="#daa520"
       stroke-width="0.527776"
       id="rect49" />
    <text
       x="2.90347"
       y="254.87704"
       font-size="3.16665px"
       font-weight="bold"
       id="text50"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">Storage Layer Details:</text>
    <text
       x="2.90347"
       y="260.15475"
       font-size="2.63887px"
       id="text51"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• m_files: map&lt;fileName, Storage_File&gt;</text>
    <text
       x="2.90347"
       y="264.11307"
       font-size="2.63887px"
       id="text52"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• m_containers: map&lt;{fileName, containerName}, Storage_Container&gt;</text>
    <text
       x="2.90347"
       y="268.07138"
       font-size="2.63887px"
       id="text53"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• Composite key = (fileName, containerName)</text>
    <text
       x="2.90347"
       y="272.02969"
       font-size="2.63887px"
       id="text54"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• Files created once, containers reused</text>
    <text
       x="2.90347"
       y="275.98801"
       font-size="2.63887px"
       id="text55"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• setAttribute() applies tech-specific settings</text>
    <text
       x="2.90347"
       y="279.94632"
       font-size="2.63887px"
       id="text56"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• setupWrite(type) creates branches/columns</text>
    <text
       x="2.90347"
       y="283.90463"
       font-size="2.63887px"
       id="text57"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• fill() stages data, commit() writes to disk</text>
    <text
       x="2.90347"
       y="287.86298"
       font-size="2.63887px"
       id="text58"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• Index container maps ID → entry number</text>
    <text
       x="2.90347"
       y="291.82129"
       font-size="2.63887px"
       id="text59"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• Mode 'o' = output/write, 'i' = input/read</text>
    <text
       x="2.90347"
       y="295.7796"
       font-size="2.63887px"
       id="text60"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• NO LOOP: PHLEX calls write() once per event</text>
    <text
       x="2.90347"
       y="299.73792"
       font-size="2.63887px"
       id="text61"
       style="stroke-width:0.263887"
       transform="scale(0.99734458,1.0026625)">• FORM processes ONE write request at a time</text>
    <rect
       x="110.26389"
       y="250.26389"
       width="99.472221"
       height="41.011806"
       fill="#fff5e6"
       stroke="#b8860b"
       stroke-width="0.527778"
       id="rect61" />
    <text
       x="112.91042"
       y="255.55627"
       font-size="2.91042px"
       font-weight="bold"
       fill="#b8860b"
       id="text62"
       style="stroke-width:0.264583">ROOT Implementation Layer (NEW):</text>
    <text
       x="112.91042"
       y="260.31876"
       font-size="2.38125px"
       id="text63"
       style="stroke-width:0.264583">• ROOT_TFileImp: Implements IStorage_File interface</text>
    <text
       x="112.91042"
       y="264.28751"
       font-size="2.38125px"
       id="text64"
       style="stroke-width:0.264583">- Wraps ROOT's TFile class</text>
    <text
       x="112.91042"
       y="268.25626"
       font-size="2.38125px"
       id="text65"
       style="stroke-width:0.264583">- Manages file opening, closing, attributes</text>
    <text
       x="112.91042"
       y="272.22501"
       font-size="2.38125px"
       id="text66"
       style="stroke-width:0.264583">• ROOT_TTreeContainerImp: Implements IStorage_Container</text>
    <text
       x="112.91042"
       y="276.19376"
       font-size="2.38125px"
       id="text67"
       style="stroke-width:0.264583">- Wraps ROOT's TTree class</text>
    <text
       x="112.91042"
       y="280.16251"
       font-size="2.38125px"
       id="text68"
       style="stroke-width:0.264583">- Handles branch creation, filling, committing</text>
    <text
       x="112.91042"
       y="284.13126"
       font-size="2.38125px"
       id="text69"
       style="stroke-width:0.264583">• ROOT_TBranch_ContainerImp: For individual branches</text>
    <text
       x="112.91042"
       y="288.10001"
       font-size="2.38125px"
       id="text70"
       style="stroke-width:0.264583">• This layer translates FORM storage calls → ROOT API calls</text>
    <rect
       x="110.26036"
       y="298.26035"
       width="99.479286"
       height="33.479294"
       fill="#ffe4e1"
       stroke="#dc143c"
       stroke-width="0.520708"
       id="rect70" />
    <text
       x="111.3864"
       y="307.5538"
       font-size="2.87143px"
       font-weight="bold"
       fill="#8b0000"
       id="text71"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">FORM Boundary:</text>
    <text
       x="111.3864"
       y="312.25247"
       font-size="2.34935px"
       id="text72"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• Red box shows FORM components</text>
    <text
       x="111.3864"
       y="316.16806"
       font-size="2.34935px"
       id="text73"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• PHLEX (left) calls FORM, but is separate</text>
    <text
       x="111.3864"
       y="320.08365"
       font-size="2.34935px"
       id="text74"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• Physical Backend (right) is external ROOT library</text>
    <text
       x="111.3864"
       y="323.99921"
       font-size="2.34935px"
       id="text75"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• Gold arrows = calls to ROOT implementation layer</text>
    <text
       x="111.3864"
       y="327.91479"
       font-size="2.34935px"
       id="text76"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• Gray arrows = ROOT implementation calls external library</text>
    <text
       x="111.3864"
       y="331.83035"
       font-size="2.34935px"
       id="text77"
       style="stroke-width:0.261038"
       transform="scale(1.0136523,0.98653157)">• FORM = form_interface + Persistence + Storage</text>
    <rect
       x="0.25898278"
       y="306.25897"
       width="99.482033"
       height="25.482035"
       fill="#f0e68c"
       stroke="#daa520"
       stroke-width="0.517966"
       id="rect77" />
    <text
       x="2.8446493"
       y="316.44116"
       font-size="2.84881px"
       font-weight="bold"
       id="text78"
       style="stroke-width:0.258983"
       transform="scale(1.0163342,0.98392832)">Placement Structure:</text>
    <text
       x="2.8446493"
       y="321.10284"
       font-size="2.33085px"
       id="text79"
       style="stroke-width:0.258983"
       transform="scale(1.0163342,0.98392832)">• fileName: &quot;toy.root&quot;</text>
    <text
       x="2.8446493"
       y="324.98758"
       font-size="2.33085px"
       id="text80"
       style="stroke-width:0.258983"
       transform="scale(1.0163342,0.98392832)">• containerName: &quot;Toy_Tracker/trackStart&quot;</text>
    <text
       x="2.8446493"
       y="328.87228"
       font-size="2.33085px"
       id="text81"
       style="stroke-width:0.258983"
       transform="scale(1.0163342,0.98392832)">[full_label = creator/label]</text>
    <text
       x="2.8446493"
       y="332.75705"
       font-size="2.33085px"
       id="text82"
       style="stroke-width:0.258983"
       transform="scale(1.0163342,0.98392832)">• technology: ROOT_TTREE / ROOT_RNTUPLE / HDF5</text>
    <text
       x="-19.712484"
       y="87.078926"
       font-size="3.175px"
       fill="#000000"
       id="text27"
       style="stroke-width:0.264583">write(creator, product_base/batch)</text>
    <text
       x="104.92422"
       y="339.04001"
       font-size="2.91042px"
       fill="#666666"
       text-anchor="middle"
       id="text83"
       style="stroke-width:0.264583">FORM Write Operation | PHLEX → FORM (form_interface → persistence.cpp → storage.cpp) → ROOT Impl → External (ROOT/HDF5)</text>
  </g>
</svg>
